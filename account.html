<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Manage your Blue Ember account settings, addresses, payment methods, and preferences.">
  <link rel="icon" type="image/png" href="assets/favicon.png" style="border-radius: 50%;">
  <title>Account Settings - Blue Ember</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">

  <!-- Preload Boxicons CSS for faster loading - more effective than preloading font alone -->
  <link rel="preload" href='https://cdn.boxicons.com/3.0.6/fonts/basic/boxicons.min.css' as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link href='https://cdn.boxicons.com/3.0.6/fonts/basic/boxicons.min.css' rel='stylesheet'>
  </noscript>

  <!-- Stylesheets -->
  <link href="universal.css" rel="stylesheet">
  <link href="darkmode.css" rel="stylesheet">
  <link href="navbar.css" rel="stylesheet">
  <link href="mobile-sidebar.css" rel="stylesheet">
  <link href="RESPONSIVENESS.css" rel="stylesheet">
  <link href="account.css" rel="stylesheet">
  <link href="premium-account.css" rel="stylesheet">
  <link rel="stylesheet" href="css/cookie-consent.css">
  <link rel="stylesheet" href="chatbot.css">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>


  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="footer.css">


  <!-- Scripts -->
  <script src="js/darkmode.js" defer></script>
  <script src="js/db-client.js"></script>
  <script src="js/order-manager.js" defer></script>
  <script src="js/chatbot.js" defer></script>
  <script src="js/mobile-sidebar.js" defer></script>
  <script src="js/navigation.js" defer></script>
  <script src="js/profile-dropdown.js" defer></script>
  <script src="js/logout-modal.js" defer></script>
  <script src="js/account-settings.js" defer></script>
  <script src="js/cookie-manager.js" defer></script>


</head>
<style>
  .navbar li {
    position: relative;
    margin: 0;
  }

  .sidebar-content {
    flex-grow: 1;
    padding: 20px 16px;
    display: flex;
    flex-direction: column;
    overflow-y: visible;
    gap: 8px;
  }

  .collapsible-content {
    height: auto;
    max-height: 100%;
    overflow-y: scroll !important;
    overflow-x: hidden;
    border-radius: 12px;
    padding: 0 10px 0 6px;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: rgba(0, 0, 0, 0.02);
  }

  .profile-dropdown-container {
    top: 4vh !important;
  }

  .action-btn {
    color: #9ca3af;
    font-size: 20px;
    cursor: pointer;
    background: transparent;
    border: none;
    padding: 4px;
    border-radius: 30px;
    padding: 10px !important;
    transition: color 0.2s;
    display: flex;
    transition: 1s cubic-bezier(0, 0.92, 0.55, 1.26);
  }

  .profile-dropdown-container::before {
    content: '';
    position: absolute;
    top: -16px;
    left: 88%;
    transform: translateX(-50%);
    width: 32px;
    height: 32px;
    background-color: #ffffff;
    display: none;
    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
    clip-path: none;
    mix-blend-mode: darken;
    box-shadow: none;
  }

  .sidebar-header {
    padding: 15px;
  }

  /* Add to mobile-sidebar.css */

  /* Close button (already exists, but ensuring it's complete) */
  .close-sidebar-btn {
    background: transparent;
    border: none;
    font-size: 24px;
    color: var(--text-sec);
    cursor: pointer;
    transition: color 0.2s;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }

  .close-sidebar-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: var(--text-main);
  }

  /* Sidebar login container (for consistency) */
  .sidebar-login-container {
    margin-top: 8px;
  }

  /* Mobile cart link (consistent with sidebar-nav-item but with special styling) */
  .mobile-cart-link {
    display: flex;
    align-items: center;
    padding: 14px 16px;
    border-radius: 12px;
    color: var(--text-main);
    text-decoration: none;
    font-size: 16px;
    font-weight: 500;
    transition: all 0.2s ease;
    gap: 16px;
    background: rgba(0, 153, 255, 0.08);
    /* Light blue background for cart */
  }

  .mobile-cart-link i {
    width: 20px;
    text-align: center;
    color: var(--text-sec);
    font-size: 18px;
    transition: color 0.2s;
  }

  .mobile-cart-link:hover,
  .mobile-cart-link:active {
    background: rgba(0, 153, 255, 0.12);
    color: var(--primary-blue);
    transform: translateX(4px);
  }

  .mobile-cart-link:hover i {
    color: var(--primary-blue);
  }

  /* Dark mode for mobile cart link */
  body.dark-mode .mobile-cart-link {
    background: rgba(1, 232, 188, 0.1);
    color: var(--text-inverse);
  }

  body.dark-mode .mobile-cart-link:hover {
    background: rgba(1, 232, 188, 0.15);
    color: var(--teal-accent);
  }

  body.dark-mode .mobile-cart-link:hover i {
    color: var(--teal-accent);
  }

  /* Header profile (if keeping the unused element) */
  .header-profile {
    display: none;
    align-items: center;
    gap: 6px;
    padding: 15px 0px 15px 4px;
    cursor: pointer;
    scale: 1.05;
    border-radius: 8px;
    transition: background-color 0.2s;
    width: 100%;
  }

  #navbar-avatar-img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #0099ff;
  }

  .header-profile .user-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }


  body.dark-mode .header-profile .user-name {
    color: #fff;
  }

  .header-profile .user-name {
    font-weight: 600;
    font-size: 16px;
    color: #333;
    line-height: 1.2;
  }

  .header-profile .user-email {
    font-size: 13px;
    color: #666;
    line-height: 1.2;
  }

  /* Default brand state */
  .default-brand {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  body.dark-mode .navbar-toggle {
    color: #616161;
  }

  .hamburger {
    display: none;
  }

  @media (max-width:799px) {
    .hamburger {
      display: block;
    }
  }

  /* --- MOBILE PILL NAVBAR INTEGRATION --- */
  @media (max-width: 768px) {

    /* --- SEARCH BAR OVERLAY --- */
    #mobilePillSearchBar {
      position: fixed;
      bottom: 90px;
      /* Adjusted to be above navbar */
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      width: 85%;
      background: rgb(39, 39, 39);
      border-radius: 50px;
      padding: 6px 6px 6px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      z-index: 999;
    }

    #mobilePillSearchBar.active {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: all;
    }

    #mobilePillSearchBar input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 14px;
      border-radius: 30px;
      padding: 15px 0px 15px 10px;
      background: transparent;
    }

    /* --- THE NAVBAR --- */
    #mobilePillNavbar {
      position: fixed;
      bottom: 25px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #ffffff;
      padding: 5px;
      border-radius: 50px;
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      align-items: center;
      gap: 0px;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 999;
      /* Higher priority */
    }

    #mobilePillNavbar .nav-item {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 45px;
      padding: 0 15px;
      border-radius: 30px;
      cursor: pointer;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
      color: #888;
      overflow: hidden;
    }

    #mobilePillNavbar .nav-item ion-icon {
      font-size: 22px;
      min-width: 22px;
      transition: color 0.3s;
      color: #232323;
    }

    #mobilePillNavbar .nav-text {
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      max-width: 0;
      opacity: 0;
      margin-left: 0;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      transition: all 0.4s ease;
    }

    #mobilePillNavbar .nav-item.active {
      background-color: #232323;
      color: #ffffff;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      padding: 22px 0px 22px 12px;
    }

    #mobilePillNavbar .nav-item.active ion-icon {
      color: #ffffff;
    }

    #mobilePillNavbar .nav-item.active .nav-text {
      max-width: 100px;
      opacity: 1;
      margin-left: 10px;
    }
  }

  /* Hide on Desktop */
  @media (min-width: 769px) {

    #mobilePillNavbar,
    #mobilePillSearchBar {
      display: none !important;
    }
  }

  /* Centered Spinner in Buttons */
  .btn {
    position: relative;
  }

  .btn .spinner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
  }

  .btn.loading .btn-text {
    opacity: 0;
  }

  .btn.loading .spinner {
    display: block;
  }
</style>

<body>
  <!-- Mobile Sidebar Menu (Redesigned) -->
  <div class="mobile-menu" id="mobileMenu">

    <!-- 1. Header: Brand or User Profile -->
    <div class="sidebar-header" id="sidebarHeader">
      <!-- Default State: Brand Logo -->
      <div class="header-brand default-brand" id="sidebarBrand">
        <div class="navbar-logo">
          <img src="assets/BlueEmber-ezgif.com-gif-maker.gif" alt="Blue Ember animated logo"
            style="width: 30px;height: auto;">
          <span>
            <h6 style="color: #0099ff;font-size: large;margin: 0px 0px -6px 0px;">BLUE</h6>
            <h6 style="color: #000000;font-size: large;margin: 0px 0px -6px 0px;">EMBER</h6>
          </span>
        </div>
      </div>

      <!-- User State (Logged In) -->
      <div class="header-profile" id="sidebarProfileContainer">
        <img src="assets/profilepreview.jpg" alt="Profile" id="navbar-avatar-img">
        <div class="user-info">
          <span class="user-name" id="sidebarUserName">User Name</span>
          <span class="user-email" id="sidebarUserEmail">email@example.com</span>
        </div>
        <i class='bx  bx-chevron-down'></i>
      </div>

      <!-- Close Button -->
      <button class="close-btn" id="closeBtn" aria-label="Close menu"
        style="right: -19px;padding: inherit;display: flex;position: relative;">
        <i class='bx  bx-caret-big-left'></i>
      </button>


      <!-- Mobile Specific Profile Dropdown (Floating) -->
      <div class="mobile-profile-dropdown" id="mobileProfileDropdown" style="display: none;">

        <div class="mobile-dropdown-items">
          <a href="profile.html" class="mobile-dropdown-item mobile-item-links">
            <i class="fa-regular fa-user"></i> Profile
          </a>
          <a href="account.html" class="mobile-dropdown-item mobile-item-links">
            <i class="fa-solid fa-toggle-off"></i> Account Settings
          </a>
          <a href="profile.html" class="mobile-dropdown-item mobile-item-links">
            <i class="fa-regular fa-comments"></i> Purchases & Reviews
          </a>
          <a href="Contact.html" class="mobile-dropdown-item mobile-item-links">
            <i class="fa-regular fa-circle-question"></i> Help Center
          </a>
        </div>
      </div>
    </div>

    <!-- 2. Content: Navigation Links -->
    <div class="sidebar-content">

      <a href="index.html" class="sidebar-nav-item">
        <i class="fa-solid fa-house"></i>
        <span>Home</span>
      </a>

      <!-- Collapsible: Categories -->
      <div class="sidebar-collapsible" id="col-categories">
        <button class="collapsible-trigger" data-accordion-id="col-categories">
          <div style="display:flex; align-items:center;">
            <i class='bx  bx-categories'></i>
            <span>Categories</span>
          </div>
          <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="collapsible-content" data-accordion-content="col-categories">
          <a href="product2.html" class="sub-link">Toys</a>
          <a href="product2.html" class="sub-link">Supplyments</a>
          <a href="product2.html" class="sub-link">Beauty</a>
          <a href="product2.html" class="sub-link">HomeGoods</a>
        </div>
      </div>

      <!-- Collapsible: Brands -->
      <div class="sidebar-collapsible" id="col-brands">
        <button class="collapsible-trigger" data-accordion-id="col-brands">
          <div style="display:flex; align-items:center;">
            <i class="fa-solid fa-building trigger-icon"></i>
            <span>Brands</span>
          </div>
          <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="collapsible-content" data-accordion-content="col-brands">
          <a href="samsung-productpage.html" class="sub-link">Samsung</a>
          <a href="LG-productpage.html" class="sub-link">LG</a>
          <a href="Whirlpool-productpage.html" class="sub-link">Whirlpool</a>
          <a href="BOSCH-productpage.html" class="sub-link">Bosch</a>
          <a href="Electrolux-productpage.html" class="sub-link">Revlon</a>
          <a href="Apple-productpage.html" class="sub-link">Toys R Us</a>
        </div>
      </div>

      <a href="product2.html" class="sidebar-nav-item">
        <i class="fa-solid fa-tags"></i>
        <span>Products</span>
      </a>

      <a href="Contact.html" class="sidebar-nav-item">
        <i class="fa-solid fa-envelope"></i>
        <span>Contact Us</span>
      </a>

      <!-- Dynamic Cart Link -->
      <li>
        <a href="#" id="mobile-cart-link" class="mobile-cart-link">
          <i class="fa-solid fa-cart-shopping me-2"></i>Shopping Cart
        </a>
      </li>

      <!-- Login Link (Hidden if logged in) -->
      <div id="sidebar-login-container">
        <a href="login.html" class="sidebar-nav-item" id="sidebar-login-link">
          <i class="fa-solid fa-right-to-bracket"></i>
          <span>Login</span>
        </a>
      </div>

    </div>

    <!-- 3. Footer: Settings / Logout -->
    <div class="sidebar-footer" id="sidebarFooter">
      <button id="mobile-theme-toggle" class="footer-btn">
        <i class="fa-solid fa-moon"></i>
        <span>Toggle Theme</span>
      </button>

      <!-- Logout will be injected here -->
    </div>

  </div>

  <!-- Navbar -->
  <nav>
    <div class="navbar-container">
      <!-- Mobile Hamburger -->


      <a href="index.html" aria-label="Navigate to home page">
        <div class="navbar-logo">
          <img src="assets/BlueEmber-ezgif.com-gif-maker.gif" alt="Blue Ember animated logo"
            style="width: 30px; height: auto;">
          <span>
            <h6 style="color: #0099ff; font-size: large; margin: 0px 0px -6px 0px;">BLUE</h6>
            <h6 style="color: #ffffff; font-size: large; margin: 0px 0px -6px 0px;">EMBER</h6>
          </span>
        </div>
      </a>

      <ul class="navbar">
        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
        <li><a href="products.html"><i class="fas fa-box"></i> Products</a></li>
        <li><a href="brands.html"><i class="fas fa-star"></i> Brands</a></li>
        <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
      </ul>


      <div class="threebtnswrapper"
        style="margin-left: auto;display: flex;align-items: center;gap: 5px;border: 1px solid;padding: 3px;border-radius: 30px;height: 52px;color: #828282;flex-wrap: wrap;align-content: center;">

        <button id="dark-mode-toggle" class="navbar-toggle" style="margin: 0px;">
          <span style="position: relative;top: 2px;"><i class="fas fa-moon"></i></span>
        </button>
        <button class="hamburger" id="hamburger" style="padding: 5px;">
          <i class="fas fa-bars"></i>
        </button>
        <button class="profile-icon-btn" id="profileIconBtn">
          <img src="" alt="Profile" class="profile-icon-img" id="profileIconImg">
          <i class="fas fa-user profile-icon-placeholder"></i>
        </button>

        <div class="profile-dropdown-container" id="profileDropdownContainer" style="display: none;">
          <div class="profile-dropdown" id="profileDropdown">
            <ul class="profile-dropdown-list">
              <li>
                <a href="profile.html" class="profile-dropdown-item">
                  <i class="fa-regular fa-user"></i>
                  <span>Profile</span>
                </a>
              </li>
              <li>
                <a href="#" class="profile-dropdown-item">
                  <i class="fa-regular fa-comments"></i>
                  <span>Purchases & Reviews</span>
                </a>
              </li>

              <li>
                <a href="account.html" class="profile-dropdown-item">
                  <i class="fa-solid fa-toggle-off"></i>
                  <span>Account Settings</span>
                </a>
              </li>
            </ul>
            <div class="profile-dropdown-divider"></div>
            <ul class="profile-dropdown-list">
              <li>
                <a href="Contact.html" class="profile-dropdown-item">
                  <i class="fa-regular fa-circle-question"></i>
                  <span>Help center</span>
                </a>
              </li>
              <li>
                <a href="#" class="profile-dropdown-item" id="nav-dropdown-logout">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Logout</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Authentication Prompt -->
  <div id="auth-prompt" class="auth-prompt" style="display: none;">
    <div class="auth-prompt-container">
      <h1 class="auth-prompt-title">Don't have an account? Sign up or log in.</h1>
      <div class="auth-prompt-buttons">
        <a href="signup.html" class="btn btn-primary auth-btn">Sign Up</a>
        <a href="login.html" class="btn btn-outline auth-btn">Log In</a>
      </div>
    </div>
  </div>




  <!-- Main Content -->
  <main class="account-settings-main" id="account-main-content">
    <div class="account-container">
      <h1 class="page-title">Account Settings</h1>

      <!-- Tab Navigation -->
      <div class="tabs-navigation">
        <button class="tab-btn active" data-tab="account">
          <i class="bx bx-user-circle"></i> Account
        </button>
        <button class="tab-btn" data-tab="privacy">
          <i class="bx bx-shield"></i> Privacy
        </button>
        <button class="tab-btn" data-tab="addresses">
          <i class="bx bx-map"></i> Addresses
        </button>
        <button class="tab-btn" data-tab="credit-cards">
          <i class="bx bx-credit-card"></i> Credit Cards
        </button>
        <button class="tab-btn" data-tab="settings">
          <i class="bx bx-cog"></i> Account Settings
        </button>
        <button class="tab-btn" data-tab="notifications">
          <i class="bx bx-bell"></i> Notifications
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tabs-content">

        <!-- Account Tab -->
        <div class="tab-pane active" id="account-tab">
          <div class="account-card">
            <h2>About You</h2>

            <div class="profile-picture-section">
              <div class="profile-pic-wrapper">
                <img src="" alt="Profile" id="profilePicPreview" class="profile-pic-display">
                <i class="bx bxs-user-circle profile-pic-placeholder"></i>
              </div>
              <div class="profile-pic-actions">
                <label for="profilePicInput" class="btn btn-primary">
                  <span class="btn-text"><i class="bx bx-upload"></i> Upload Photo</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </label>
                <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
                <button class="btn btn-outline" id="removeProfilePic">
                  <span class="btn-text">Remove</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
              </div>
            </div>

            <form class="account-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName">First Name</label>
                  <input type="text" id="firstName" placeholder="Enter your first name">
                </div>
                <div class="form-group">
                  <label for="lastName">Last Name</label>
                  <input type="text" id="lastName" placeholder="Enter your last name">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="gender">Gender</label>
                  <select id="gender">
                    <option value="">Prefer not to say</option>
                    <option value="female">Female</option>
                    <option value="male">Male</option>
                    <option value="other">Other</option>
                    <option value="custom">Prefer to self-describe</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="birthday">Birthday</label>
                  <input type="date" id="birthday">
                </div>
              </div>

              <div class="form-group">
                <label for="about">About</label>
                <textarea id="about" rows="4" placeholder="Tell us about yourself..." maxlength="500"></textarea>
                <div class="character-counter">
                  <span id="aboutCounter">0</span> / 500
                </div>
              </div>
            </form>
          </div>

          <div class="account-card">
            <h2>Location Settings</h2>
            <p class="card-description">Set where you live, what language you speak, and the currency you
              use.</p>

            <form class="account-form">
              <div class="form-group">
                <label for="region">Region</label>
                <select id="region" name="region_code">
                  <option value="AU">Australia</option>
                  <option value="CA">Canada</option>
                  <option value="FR">France</option>
                  <option value="DE">Germany</option>
                  <option value="GR">Greece</option>
                  <option value="IN">India</option>
                  <option value="IE">Ireland</option>
                  <option value="IT">Italy</option>
                  <option value="JP">Japan</option>
                  <option value="NZ">New Zealand</option>
                  <option value="PL">Poland</option>
                  <option value="PT">Portugal</option>
                  <option value="ES">Spain</option>
                  <option value="NL">The Netherlands</option>
                  <option value="GB">United Kingdom</option>
                  <option value="US">United States</option>
                  <optgroup label="────────────">
                    <option value="AF">Afghanistan</option>
                    <option value="AX">Åland Islands</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <option value="AS">American Samoa</option>
                    <option value="AD">Andorra</option>
                    <option value="AO">Angola</option>
                    <option value="AI">Anguilla</option>
                    <option value="AG">Antigua and Barbuda</option>
                    <option value="AR">Argentina</option>
                    <option value="AM">Armenia</option>
                    <option value="AW">Aruba</option>
                    <option value="AT">Austria</option>
                    <option value="AZ">Azerbaijan</option>
                    <option value="BS">Bahamas</option>
                    <option value="BH">Bahrain</option>
                    <option value="BD">Bangladesh</option>
                    <option value="BB">Barbados</option>
                    <option value="BE">Belgium</option>
                    <option value="BZ">Belize</option>
                    <option value="BJ">Benin</option>
                    <option value="BM">Bermuda</option>
                    <option value="BT">Bhutan</option>
                    <option value="BO">Bolivia</option>
                    <option value="BA">Bosnia and Herzegovina</option>
                    <option value="BW">Botswana</option>
                    <option value="BV">Bouvet Island</option>
                    <option value="BR">Brazil</option>
                    <option value="IO">British Indian Ocean Territory</option>
                    <option value="VG">British Virgin Islands</option>
                    <option value="BN">Brunei</option>
                    <option value="BG">Bulgaria</option>
                    <option value="BF">Burkina Faso</option>
                    <option value="BI">Burundi</option>
                    <option value="KH">Cambodia</option>
                    <option value="CM">Cameroon</option>
                    <option value="CV">Cape Verde</option>
                    <option value="KY">Cayman Islands</option>
                    <option value="CF">Central African Republic</option>
                    <option value="TD">Chad</option>
                    <option value="CL">Chile</option>
                    <option value="CN">China</option>
                    <option value="CX">Christmas Island</option>
                    <option value="CC">Cocos (Keeling) Islands</option>
                    <option value="CO">Colombia</option>
                    <option value="KM">Comoros</option>
                    <option value="CG">Congo, Republic of</option>
                    <option value="CK">Cook Islands</option>
                    <option value="CR">Costa Rica</option>
                    <option value="HR">Croatia</option>
                    <option value="CW">Curaçao</option>
                    <option value="CY">Cyprus</option>
                    <option value="CZ">Czech Republic</option>
                    <option value="DK">Denmark</option>
                    <option value="DJ">Djibouti</option>
                    <option value="DM">Dominica</option>
                    <option value="DO">Dominican Republic</option>
                    <option value="EC">Ecuador</option>
                    <option value="EG">Egypt</option>
                    <option value="SV">El Salvador</option>
                    <option value="GQ">Equatorial Guinea</option>
                    <option value="ER">Eritrea</option>
                    <option value="EE">Estonia</option>
                    <option value="ET">Ethiopia</option>
                    <option value="FK">Falkland Islands (Malvinas)</option>
                    <option value="FO">Faroe Islands</option>
                    <option value="FJ">Fiji</option>
                    <option value="FI">Finland</option>
                    <option value="GF">French Guiana</option>
                    <option value="PF">French Polynesia</option>
                    <option value="TF">French Southern Territories</option>
                    <option value="GA">Gabon</option>
                    <option value="GM">Gambia</option>
                    <option value="GE">Georgia</option>
                    <option value="GH">Ghana</option>
                    <option value="GI">Gibraltar</option>
                    <option value="GL">Greenland</option>
                    <option value="GD">Grenada</option>
                    <option value="GP">Guadeloupe</option>
                    <option value="GU">Guam</option>
                    <option value="GT">Guatemala</option>
                    <option value="GG">Guernsey</option>
                    <option value="GN">Guinea</option>
                    <option value="GW">Guinea-Bissau</option>
                    <option value="GY">Guyana</option>
                    <option value="HT">Haiti</option>
                    <option value="HM">Heard Island and McDonald Islands</option>
                    <option value="VA">Holy See (Vatican City State)</option>
                    <option value="HN">Honduras</option>
                    <option value="HK">Hong Kong</option>
                    <option value="HU">Hungary</option>
                    <option value="IS">Iceland</option>
                    <option value="ID">Indonesia</option>
                    <option value="IQ">Iraq</option>
                    <option value="IM">Isle of Man</option>
                    <option value="IL">Israel</option>
                    <option value="IC">Ivory Coast</option>
                    <option value="JM">Jamaica</option>
                    <option value="JE">Jersey</option>
                    <option value="JO">Jordan</option>
                    <option value="KZ">Kazakhstan</option>
                    <option value="KE">Kenya</option>
                    <option value="KI">Kiribati</option>
                    <option value="KV">Kosovo</option>
                    <option value="KW">Kuwait</option>
                    <option value="KG">Kyrgyzstan</option>
                    <option value="LA">Laos</option>
                    <option value="LV">Latvia</option>
                    <option value="LB">Lebanon</option>
                    <option value="LS">Lesotho</option>
                    <option value="LR">Liberia</option>
                    <option value="LY">Libya</option>
                    <option value="LI">Liechtenstein</option>
                    <option value="LT">Lithuania</option>
                    <option value="LU">Luxembourg</option>
                    <option value="MO">Macao</option>
                    <option value="MK">Macedonia</option>
                    <option value="MG">Madagascar</option>
                    <option value="MW">Malawi</option>
                    <option value="MY">Malaysia</option>
                    <option value="MV">Maldives</option>
                    <option value="ML">Mali</option>
                    <option value="MT">Malta</option>
                    <option value="MH">Marshall Islands</option>
                    <option value="MQ">Martinique</option>
                    <option value="MR">Mauritania</option>
                    <option value="MU">Mauritius</option>
                    <option value="YT">Mayotte</option>
                    <option value="MX">Mexico</option>
                    <option value="FM">Micronesia, Federated States of</option>
                    <option value="MD">Moldova</option>
                    <option value="MC">Monaco</option>
                    <option value="MN">Mongolia</option>
                    <option value="ME">Montenegro</option>
                    <option value="MS">Montserrat</option>
                    <option value="MA">Morocco</option>
                    <option value="MZ">Mozambique</option>
                    <option value="MM">Myanmar (Burma)</option>
                    <option value="NA">Namibia</option>
                    <option value="NR">Nauru</option>
                    <option value="NP">Nepal</option>
                    <option value="AN">Netherlands Antilles</option>
                    <option value="NC">New Caledonia</option>
                    <option value="NI">Nicaragua</option>
                    <option value="NE">Niger</option>
                    <option value="NG">Nigeria</option>
                    <option value="NU">Niue</option>
                    <option value="NF">Norfolk Island</option>
                    <option value="MP">Northern Mariana Islands</option>
                    <option value="NO">Norway</option>
                    <option value="OM">Oman</option>
                    <option value="PK" selected="selected">Pakistan</option>
                    <option value="PW">Palau</option>
                    <option value="PS">Palestinian Territory, Occupied</option>
                    <option value="PA">Panama</option>
                    <option value="PG">Papua New Guinea</option>
                    <option value="PY">Paraguay</option>
                    <option value="PE">Peru</option>
                    <option value="PH">Philippines</option>
                    <option value="PR">Puerto Rico</option>
                    <option value="QA">Qatar</option>
                    <option value="RE">Reunion</option>
                    <option value="RO">Romania</option>
                    <option value="RW">Rwanda</option>
                    <option value="SH">Saint Helena</option>
                    <option value="KN">Saint Kitts and Nevis</option>
                    <option value="LC">Saint Lucia</option>
                    <option value="MF">Saint Martin (French part)</option>
                    <option value="PM">Saint Pierre and Miquelon</option>
                    <option value="VC">Saint Vincent and the Grenadines</option>
                    <option value="WS">Samoa</option>
                    <option value="SM">San Marino</option>
                    <option value="ST">Sao Tome and Principe</option>
                    <option value="SA">Saudi Arabia</option>
                    <option value="SN">Senegal</option>
                    <option value="RS">Serbia</option>
                    <option value="SC">Seychelles</option>
                    <option value="SL">Sierra Leone</option>
                    <option value="SG">Singapore</option>
                    <option value="SX">Sint Maarten (Dutch part)</option>
                    <option value="SK">Slovakia</option>
                    <option value="SI">Slovenia</option>
                    <option value="SB">Solomon Islands</option>
                    <option value="SO">Somalia</option>
                    <option value="ZA">South Africa</option>
                    <option value="GS">South Georgia and the South Sandwich Islands</option>
                    <option value="KR">South Korea</option>
                    <option value="SS">South Sudan</option>
                    <option value="LK">Sri Lanka</option>
                    <option value="SD">Sudan</option>
                    <option value="SR">Suriname</option>
                    <option value="SJ">Svalbard and Jan Mayen</option>
                    <option value="SZ">Swaziland</option>
                    <option value="SE">Sweden</option>
                    <option value="CH">Switzerland</option>
                    <option value="TW">Taiwan</option>
                    <option value="TJ">Tajikistan</option>
                    <option value="TZ">Tanzania</option>
                    <option value="TH">Thailand</option>
                    <option value="TL">Timor-Leste</option>
                    <option value="TG">Togo</option>
                    <option value="TK">Tokelau</option>
                    <option value="TO">Tonga</option>
                    <option value="TT">Trinidad</option>
                    <option value="TN">Tunisia</option>
                    <option value="TR">Türkiye</option>
                    <option value="TM">Turkmenistan</option>
                    <option value="TC">Turks and Caicos Islands</option>
                    <option value="TV">Tuvalu</option>
                    <option value="UG">Uganda</option>
                    <option value="UA">Ukraine</option>
                    <option value="AE">United Arab Emirates</option>
                    <option value="UM">United States Minor Outlying Islands</option>
                    <option value="UY">Uruguay</option>
                    <option value="VI">U.S. Virgin Islands</option>
                    <option value="UZ">Uzbekistan</option>
                    <option value="VU">Vanuatu</option>
                    <option value="VE">Venezuela</option>
                    <option value="VN">Vietnam</option>
                    <option value="WF">Wallis and Futuna</option>
                    <option value="EH">Western Sahara</option>
                    <option value="YE">Yemen</option>
                    <option value="CD">Zaire (Democratic Republic of Congo)</option>
                    <option value="ZM">Zambia</option>
                    <option value="ZW">Zimbabwe</option>
                  </optgroup>
                </select>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="language">Language</label>
                  <select id="language" name="language_code">
                    <option value="de">Deutsch</option>
                    <option value="en-GB" selected="selected">English (UK)</option>
                    <option value="en-IN">English (IN)</option>
                    <option value="en-US">English (US)</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="it">Italiano</option>
                    <option value="ja">日本語</option>
                    <option value="nl">Nederlands</option>
                    <option value="pl">Polski</option>
                    <option value="pt">Português</option>
                    <option value="ru">Русский</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="currency">Currency</label>
                  <select id="currency" name="currency_code">
                    <option value="USD" selected="selected">$ United States Dollar (USD)</option>
                    <option value="CAD">$ Canadian Dollar (CAD)</option>
                    <option value="EUR">€ Euro (EUR)</option>
                    <option value="GBP">£ British Pound (GBP)</option>
                    <option value="AUD">$ Australian Dollar (AUD)</option>
                    <option value="JPY">¥ Japanese Yen (JPY)</option>
                    <option value="CNY">¥ Chinese Yuan (CNY)</option>
                    <option value="CZK">Kč Czech Koruna (CZK)</option>
                    <option value="DKK">kr Danish Krone (DKK)</option>
                    <option value="HKD">$ Hong Kong Dollar (HKD)</option>
                    <option value="HUF">Ft Hungarian Forint (HUF)</option>
                    <option value="INR">₹ Indian Rupee (INR)</option>
                    <option value="IDR">Rp Indonesian Rupiah (IDR)</option>
                    <option value="ILS">₪ Israeli Shekel (ILS)</option>
                    <option value="MYR">RM Malaysian Ringgit (MYR)</option>
                    <option value="MXN">$ Mexican Peso (MXN)</option>
                    <option value="MAD">DH Moroccan Dirham (MAD)</option>
                    <option value="NZD">$ New Zealand Dollar (NZD)</option>
                    <option value="NOK">kr Norwegian Krone (NOK)</option>
                    <option value="PHP">₱ Philippine Peso (PHP)</option>
                    <option value="SGD">$ Singapore Dollar (SGD)</option>
                    <option value="VND">₫ Vietnamese Dong (VND)</option>
                    <option value="ZAR">R South African Rand (ZAR)</option>
                    <option value="SEK">kr Swedish Krona (SEK)</option>
                    <option value="CHF">Swiss Franc (CHF)</option>
                    <option value="THB">฿ Thai Baht (THB)</option>
                    <option value="TWD">NT$ Taiwan New Dollar (TWD)</option>
                    <option value="TRY">₺ Turkish Lira (TRY)</option>
                    <option value="PLN">zł Polish Zloty (PLN)</option>
                    <option value="BRL">R$ Brazilian Real (BRL)</option>
                  </select>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="saveAccountBtn">
                  <span class="btn-text"><i class="bx bx-save"></i> Save Changes</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Privacy Tab (NEW - Between Account and Addresses) -->
        <div class="tab-pane" id="privacy-tab">
          <div class="account-card" id="phoneSection">
            <h2>Phone Number</h2>
            <p class="card-description">Add a phone number to secure your account and receive security
              alerts.</p>
            <form class="account-form">
              <div class="form-group">
                <label for="phoneNumber">Mobile Phone Number</label>
                <div style="display: flex; gap: 10px;">
                  <input type="tel" id="phoneNumber" placeholder="+1 (555) 000-0000" style="flex: 1;">
                  <button type="button" class="btn btn-primary" id="savePhoneBtn" style="white-space: nowrap;">
                    <span class="btn-text"><i class="bx bx-save"></i> Save Number</span>
                    <div class="spinner">
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                      <div class="spinner-blade"></div>
                    </div>
                  </button>
                </div>
              </div>
            </form>
          </div>
          <div class="account-card">
            <h2>Your recently viewed Listings</h2>
            <p class="card-description">Clean your recently viewed listings here and we'll no longer show
              them on this site. Note that they can be recorded in the future.</p>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" id="clearHistoryBtn">
                <i class="bx bx-trash"></i> Clear recently viewed listings
              </button>
            </div>
          </div>

          <div class="account-card">
            <h2>Download Data</h2>
            <p class="card-description">Download a .ZIP file of your Blue Ember personal information, provided in
              both CSV and JSON file formats.</p>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" id="exportDataBtn">
                <span class="btn-text"><i class="bx bx-download"></i> Request your data for
                  download</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>
          </div>

          <div class="account-card">
            <h2>Findability Settings</h2>
            <div class="toggle-item">
              <div class="toggle-info">
                <h4>Do you want others to be able to find you by your email address?</h4>
                <p>Your email address will not be publicly displayed.</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="findByEmail">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="form-actions" style="margin-top: 20px;">
              <button type="button" class="btn btn-outline" id="saveFindabilityBtn">
                <span class="btn-text"><i class="bx bx-save"></i> Save findability settings</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>
          </div>

          <div class="account-card">
            <h2>Privacy Settings</h2>
            <h3 style="font-size: 16px; font-weight: 500; margin-bottom: 15px;">Consent</h3>
            <p class="card-description">To give you the best online experience, we use cookies and similar
              technologies for performance, analytics, personalization, advertising, and to help our site
              function. Want to know more? Read our <a href="#" style="color: #0099ff;">Privacy
                Policy</a>. You can change your preferences below.</p>

            <div class="toggle-group" style="margin-top: 20px;">
              <div class="toggle-item">
                <div class="toggle-info">
                  <h4>Performance and analytics cookies</h4>
                  <p>These help us understand and improve our services by collecting info on how you
                    use them.</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="analyticsConsent" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="toggle-item">
                <div class="toggle-info">
                  <h4>Personalization</h4>
                  <p>This optional feature allows us to provide content tailored just for you.</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="personalizationConsent" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="toggle-item">
                <div class="toggle-info">
                  <h4>Third-party advertising cookies</h4>
                  <p>We and our partners use these for advertising (including across partners).</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="adConsent">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="form-actions" style="margin-top: 20px;">
              <button type="button" class="btn btn-primary" id="savePrivacyBtn">
                <span class="btn-text"><i class="bx bx-save"></i> Update privacy settings</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>
          </div>

          <div class="account-card">
            <h2>Permanently close and delete your Blue Ember account</h2>
            <p class="card-description">
              Permanently close and delete your Blue Ember account. Once deleted, your account can't be
              restored. Learn more
            </p>
            <div class="form-actions">
              <button type="button" class="btn btn-outline danger" id="requestDeletionBtn">
                <i class="bx bx-error-circle"></i> Request deletion of your data
              </button>
            </div>
          </div>
        </div>

        <!-- Addresses Tab -->
        <div class="tab-pane" id="addresses-tab">
          <div class="account-card">
            <div class="card-header-with-action">
              <h2>Your Delivery Addresses</h2>
              <button class="btn btn-primary" id="addAddressBtn">
                <span class="btn-text"><i class="bx bx-plus"></i> Add New Address</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>

            <div id="addressesList" class="addresses-list">
              <p class="empty-state">You don't currently have any delivery addresses.</p>
            </div>
          </div>

          <!-- Address Form (Hidden by default) -->
          <div class="account-card" id="addressForm" style="display: none;">
            <h3 id="addressFormTitle">Add New Address</h3>
            <form class="account-form">
              <input type="hidden" id="addressId">

              <div class="form-group">
                <label for="addressLabel">Address Label</label>
                <input type="text" id="addressLabel" placeholder="e.g., Home, Work">
              </div>

              <div class="form-group">
                <label for="addressStreet">Street Address</label>
                <input type="text" id="addressStreet" placeholder="123 Main Street">
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="addressCity">City</label>
                  <input type="text" id="addressCity" placeholder="City">
                </div>
                <div class="form-group">
                  <label for="addressState">State/Province</label>
                  <input type="text" id="addressState" placeholder="State">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="addressZip">ZIP/Postal Code</label>
                  <input type="text" id="addressZip" placeholder="12345">
                </div>
                <div class="form-group">
                  <label for="addressCountry">Country</label>
                  <input type="text" id="addressCountry" placeholder="Country">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="addressType">Address Type</label>
                  <select id="addressType">
                    <option value="">General</option>
                    <option value="Billing">Billing</option>
                    <option value="Shipping">Shipping</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="addressIcon">Icon (Optional)</label>
                  <select id="addressIcon">
                    <option value="">None</option>
                    <option value="bx-home">🏠 Home</option>
                    <option value="bx-building">🏢 Office</option>
                    <option value="bx-map-pin">📍 Location</option>
                    <option value="bx-package">📦 Warehouse</option>
                    <option value="bx-store">🏪 Store</option>
                  </select>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="saveAddressBtn">
                  <span class="btn-text"><i class="bx bx-save"></i> Save Address</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
                <button type="button" class="btn btn-outline" id="cancelAddressBtn">
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Credit Cards Tab -->
        <div class="tab-pane" id="credit-cards-tab">
          <div class="account-card">
            <div class="card-header-with-action">
              <h2>Payment Methods</h2>
              <button class="btn btn-primary" id="addCardBtn">
                <span class="btn-text"><i class="bx bx-plus"></i> Add New Card</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>
            <p class="card-description">It's only possible to add a new credit card during checkout.</p>

            <div id="cardsList" class="cards-list">
              <p class="empty-state">You don't have any saved payment methods.</p>
            </div>
          </div>

          <!--Card Form (Hidden by default) -->
          <div class="account-card" id="cardForm" style="display: none;">
            <h3 id="cardFormTitle">Add New Card</h3>
            <form class="account-form">
              <input type="hidden" id="cardId">

              <div class="form-group">
                <label for="cardNumber">Card Number</label>
                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
              </div>

              <div class="form-group">
                <label for="cardName">Cardholder Name</label>
                <input type="text" id="cardName" placeholder="Name on card">
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="cardExpiry">Expiry Date</label>
                  <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-group">
                  <label for="cardCvv">CVV</label>
                  <input type="text" id="cardCvv" placeholder="123" maxlength="4">
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="saveCardBtn">
                  <span class="btn-text"><i class="bx bx-save"></i> Save Card</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
                <button type="button" class="btn btn-outline" id="cancelCardBtn">
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Account Settings Tab -->
        <div class="tab-pane" id="settings-tab">
          <div class="account-card">
            <h2>Password</h2>
            <form class="account-form">
              <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <input type="password" id="currentPassword" placeholder="Enter current password">
              </div>

              <div class="form-group">
                <label for="newPassword">New Password</label>
                <input type="password" id="newPassword" placeholder="Enter new password">
              </div>

              <div class="form-group">
                <label for="confirmPassword">Confirm New Password</label>
                <input type="password" id="confirmPassword" placeholder="Confirm new password">
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="changePasswordBtn">
                  <span class="btn-text"><i class="bx bx-key"></i> Change Password</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
              </div>
            </form>
          </div>

          <div class="account-card">
            <h2>Email</h2>
            <form class="account-form">
              <div class="form-group">
                <label for="currentEmail">Current Email</label>
                <input type="email" id="currentEmail" placeholder="your@email.com" disabled>
              </div>

              <div class="form-group">
                <label for="newEmail">New Email</label>
                <input type="email" id="newEmail" placeholder="new@email.com">
              </div>

              <div class="form-group">
                <label for="confirmEmail">Confirm New Email</label>
                <input type="email" id="confirmEmail" placeholder="Confirm new email">
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="changeEmailBtn">
                  <span class="btn-text"><i class="bx bx-envelope"></i> Change Email</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
              </div>
            </form>
          </div>

          <div class="account-card">
            <h2>Close Your Account</h2>
            <p class="card-description">
              What happens when you close your account?
            </p>
            <ul class="info-list">
              <li>Your profile will no longer be visible to other users.</li>
              <li>Your purchase history will be archived.</li>
              <li>You won't be able to sign in or access your information.</li>
              <li>Active orders will still be processed.</li>
              <li>You can reopen your account within 180 days by contacting support.</li>
            </ul>

            <div class="form-actions">
              <button type="button" class="btn btn-outline danger" id="closeAccountBtn">
                <span class="btn-text"><i class="bx bx-error-circle"></i> Close Account</span>
                <div class="spinner">
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                  <div class="spinner-blade"></div>
                </div>
              </button>
            </div>
          </div>
        </div>

        <!-- Notifications Tab -->
        <div class="tab-pane" id="notifications-tab">
          <div class="account-card">
            <h2>New: Turn on security alerts</h2>
            <p class="card-description">We'll send you an SMS right away if we notice any unusual activity,
              so you can act fast to protect your account.</p>

            <div class="alert-box">
              <i class="bx bx-info-circle"></i>
              <p>To get security alerts, you'll first need to add and verify your mobile phone number.</p>
              <button type="button" class="btn btn-primary" id="redirectPhoneBtn">Add Phone
                Number</button>
            </div>
          </div>

          <div class="account-card">
            <h2>Email Notification Settings</h2>
            <p class="card-description">Email me when...</p>

            <form class="account-form">
              <div class="toggle-group">
                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Someone sends me a message</h4>
                    <p>Get notified when you receive a new message</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyMessages" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Someone follows me</h4>
                    <p>Get notified when someone follows your shop</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyFollows">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </form>
          </div>

          <div class="account-card">
            <h2>Email Subscriptions</h2>

            <form class="account-form">
              <div class="toggle-group">
                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>New and Notable</h4>
                    <p>Get the very best of Blue Ember - new item trends, recommendations, in our biggest
                      sale events and more collaborate in - define edgy to your in box.</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyNewItems">
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Feedback</h4>
                    <p>Share with us what customers think about your Blue Ember experience through
                      occasional marketing surveys in your inbox.</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyFeedback">
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Coupons and Promotions</h4>
                    <p>Stay in the know about the latest coupons, the items you love, for the first
                      to learn about awesome offers.</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyCoupons" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Forums</h4>
                    <p>Keep up with the conversation through notifications for Blue Ember and Blue Ember Teams
                      forums.</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyForums">
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <h4>Blue Ember Advocacy</h4>
                    <p>See in-app prompts to support the Blue Ember community, join the Blue Ember Advocacy
                      newsletter art.</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notifyAdvocacy">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" id="saveNotificationsBtn">
                  <span class="btn-text"><i class="bx bx-save"></i> Save Settings</span>
                  <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                  </div>
                </button>
              </div>
            </form>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- LOGOUT CONFIRMATION MODAL -->
  <div class="modal" id="logoutModal">
    <div class="modal-overlay logout-modal-overlay" id="logoutModalOverlay"></div>
    <div class="modal-content logout-modal-content">
      <div class="logout-modal-header">
        <div class="logout-icon">
          <i class="fas fa-sign-out-alt"></i>
        </div>
        <h3>Confirm Logout</h3>
      </div>
      <div class="logout-modal-body">
        <p>Are you sure you want to log out? You'll need to sign in again to access your account.</p>
      </div>
      <div class="logout-modal-actions">
        <button type="button" class="btn btn-secondary logout-cancel-btn" id="logoutCancelBtn">Cancel</button>
        <button type="button" class="btn btn-primary logout-confirm-btn" id="logoutConfirmBtn">
          <span class="btn-text">
            <i class="fas fa-sign-out-alt"></i>
            Log Out
          </span>
          <div class="custom-spinner">
            <div class="spinner center">
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
              <div class="spinner-blade"></div>
            </div>
          </div>
        </button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-container">
      <!-- Brand Section -->
      <div class="footer-section">
        <div class="footer-logo"><a href="index.html">
            <div class="navbar-logo"><img src="assets/BlueEmber-ezgif.com-gif-maker.gif" style="width: 30px;">
              <SPAN>
                <h6 style="color: #0099ff; font-size: large; margin: 0px 0px -6px 0px;">BLUE</h6>
                <H6 style="color: #000000; font-size: large; margin: 0px 0px -6px 0px;">EMBER</H6>
              </SPAN>
            </div>
          </a></div>
        <p class="footer-tagline">Premium Store from trusted global brands. Serving customers since 2005.</p>
      </div>

      <!-- Quick Links -->
      <div class="footer-section">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="terms and services.html">Terms & Services</a></li>
          <li><a href="privacy policy.html">Privacy Policy</a></li>
          <li><a href="Contact.html">Contact</a></li>
          <li><a href="Refund and Exchange.html">Refund & Exchange</a></li>
          <li><a href="About us .html">About Us</a></li>
        </ul>
      </div>

      <!-- Categories -->
      <div class="footer-section">
        <h4>Categories</h4>
        <ul>
          <li><a href="product2.html">Toys</a></li>
          <li><a href="product2.html">Supplyments</a></li>
          <li><a href="product2.html">Beauty</a></li>
          <li><a href="product2.html">HomeGoods</a></li>
        </ul>
      </div>

      <!-- Contact Info -->
      <div class="footer-section">
        <h4>Contact Us</h4>
        <ul>
          <li>
            <a>
              <address>
                <p><a href="https://maps.app.goo.gl/BGBAUvaKPHLhTqvh6">Hasbrouck Heights NJ 07604 USA</a>
                </p>
                <i class="fa-solid fa-phone-volume" style="color:rgb(0, 89, 255)"></i> +1 (800) 123-4567<br>
                <i class="fa-solid fa-envelope" style="color:rgb(0, 89, 255)"></i> <a
                  href="mailto:support@blue-ember.us">support@blue-ember.us</a>
              </address>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2025 Blue Ember Store. All rights reserved.</p>
      <div class="footer-legal">
        <a href="privacy policy.html">Privacy Policy</a> •
        <a href="terms and services.html">Terms of Service</a> •
      </div>
      <!-- Footer Brand Watermark -->
    <div class="footer-trending">
      <span class="footer-trending-text">BLUE </span>
      <span class="footer-trending-text">EMBER</span>
    </div>
    </div>

    
  </footer>


  <!-- Custom Modal: Delete Account Confirmation -->
  <div class="custom-modal" id="deleteAccountModal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h2>Are you sure you want to close your account?</h2>
      <p class="modal-description">Keep in mind it may take up to 30 minutes to close your account.</p>

      <div class="form-group" style="margin-top: 20px;">
        <label for="deletePasswordInput">Please Enter Your Password</label>
        <input type="password" id="deletePasswordInput" placeholder="Enter your password">
      </div>

      <div class="modal-actions">
        <button class="btn btn-outline" id="cancelDeleteBtn">Cancel</button>
        <button class="btn btn-primary" id="confirmDeleteBtn"
          style="background: linear-gradient(90deg, #ef4444, #dc2626);">
          <span class="btn-text">Close Account</span>
          <div class="spinner">
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
            <div class="spinner-blade"></div>
          </div>
        </button>
      </div>
    </div>
  </div>

  <!-- Custom Modal: Unsaved Changes Warning -->
  <div class="custom-modal" id="unsavedChangesModal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h2>You have unsaved changes</h2>
      <p class="modal-description">Are you sure you want to leave? Your changes will be lost.</p>

      <div class="modal-actions">
        <button class="btn btn-outline" id="stayOnPageBtn">Stay</button>
        <button class="btn btn-primary" id="leavePageBtn">Leave</button>
      </div>
    </div>
  </div>
  <!-- Search Bar Pop-up -->
  <div class="search-overlay" id="mobilePillSearchBar">
    <ion-icon name="search-outline" style="color:#666; font-size:20px;"></ion-icon>
    <input type="text" placeholder="Search for products..." id="mobilePillSearchInput">
  </div>


  <!-- The Pill Navbar -->
  <div class="navbar" id="mobilePillNavbar">
    <abbr title="Home">
      <div class="nav-item" data-target="home">
        <ion-icon name="home-outline"></ion-icon>
        <span class="nav-text"><a href="index.html">Home</a></span>
      </div>
    </abbr>
    <abbr title="Search">
      <div class="nav-item" data-target="search">
        <ion-icon name="search-outline"></ion-icon>
        <span class="nav-text"><a href="#">Search</a></span>
      </div>
    </abbr>

    <abbr title="Signup">
      <div class="nav-item" data-target="signup" id="Hide/UnhideSignupBtn" style="padding: 0px;">
        <a href="login.html" style="padding: 0px;">
          <li class="thebigthree-login/signup-btn">
            <button class="button button-item" id="signupNavBtn">
              <span class="button-bg">
                <span class="button-bg-layers">
                  <span class="button-bg-layer button-bg-layer-1 -purple"></span>
                  <span class="button-bg-layer button-bg-layer-2 -turquoise"></span>
                  <span class="button-bg-layer button-bg-layer-3 -yellow"></span>
                </span>
              </span>
              <span class="button-inner">
                <span class="button-inner-static">SignUp</span>
                <span class="button-inner-hover" style="color: #ffffff;">SignUp</span>
              </span>
            </button>



          </li>
        </a>
      </div>
    </abbr>
    </a>
    <abbr title="Profile">
      <div class="nav-item" data-target="user" id="Hide/UnhideUserIcon" style="display: none;">
        <ion-icon name="person-outline"></ion-icon>
        <span class="nav-text"><a href="profile.html">User</a></span>
      </div>
    </abbr>
    <abbr title="Shop">
      <div class="nav-item" data-target="shop">
        <ion-icon name="storefront-outline"></ion-icon>
        <span class="nav-text"><a href="product2.html">Shop</a></span>
      </div>
    </abbr>
    <abbr title="Chat with us">
      <div class="nav-item" data-target="chatbot" style="padding:22px;">
        <button id="chat-bubble-btn" class="chat-bubble-btn" aria-label="Chat with us">
          <ion-icon name="chatbubbles-outline"></ion-icon>
        </button>
      </div>
    </abbr>
  </div>


  </div>

  <abbr title="Chat with us">
    <button id="chat-bubble-btn-two" class="chat-bubble-btn" aria-label="Chat with us">
      <ion-icon name="chatbubbles-outline"></ion-icon>
    </button>


    <div id="chat-window" class="chat-window">

      <!-- Header -->
      <div class="chat-header">
        <div class="header-brand">
          <button class="icon-btn" id="emberSidebarToggle"><i class='bx bx-menu'></i></button>
          <div class="header-brand">
            <img src="https://ui-avatars.com/api/?name=C&background=ffffff&color=000&rounded=true"
              style="width:24px; height:24px;">
            <span class="header-title">Chatbase AI Agent</span>
          </div>
        </div>
        <button class="icon-btn" id="emberMenuToggle"><i class='bx bx-dots-horizontal-rounded'></i></button>
      </div>

      <!-- Dropdown Menu -->
      <div id="emberDropdown" class="dropdown-menu">
        <button class="menu-item" onclick="EmberCore.startNewChat()"><i class='bx bx-plus'></i> Start a new
          chat</button>
        <button class="menu-item" onclick="EmberCore.endChat()"><i class='bx bx-x'></i> End chat</button>
        <button class="menu-item" onclick="EmberCore.showRecentChats()"><i class='bx bx-history'></i> View recent
          chats</button>
      </div>

      <!-- Sidebar -->
      <div id="emberSidebar" class="sidebar">
        <h4 style="color:var(--text-main); margin-top:0;">Menu</h4>

        <button class="menu-item" onclick="EmberCore.switchView('notifications')">
          <i class='bx bx-bell'></i> Notifications
          <span class="notification-badge" style="display:none"></span>
        </button>

        <button class="menu-item" onclick="EmberCore.switchView('settings')">
          <i class='bx bx-cog'></i> Settings
        </button>

        <button class="menu-item" onclick="EmberCore.switchView('chat')">
          <i class='bx bx-arrow-back'></i> Back to Chat
        </button>
      </div>

      <!-- Drag & Drop Overlay -->
      <div id="emberDropZone" class="drop-overlay">
        <i class='bx bx-cloud-upload' style="font-size: 48px; color: var(--text-sub);"></i>
        <h3 style="color: var(--text-main); margin: 10px 0;">Drop file to upload</h3>
      </div>

      <!-- VIEW: CHAT -->
      <div id="view_chat" class="view-container active">

        <div id="emberChatBody" class="chat-body">
          <!-- Messages Injected Here -->
        </div>

        <!-- Footer Section -->
        <div class="footer-wrapper">




          <!-- Privacy Toast -->
          <div id="privacyToast" class="privacy-toast">
            <span>By chatting, you agree to our <u style="cursor:pointer">privacy policy</u>.</span>
            <i class='bx bx-x' style="font-size:16px; cursor:pointer;"
              onclick="this.parentElement.classList.add('closing')"></i>
          </div>

          <div class="preview-of-file-upload-before-send" id="preview-window-2A">
            <p>Images Uploaded in Chat are Temporary & Deleted after Web reloads.</p>
            <!-- Preview of File Upload Before Send, edit structure if something a miss -->
          </div>
          <!-- Emoji window moved to floating position outside chat -->

          <!-- Input Card -->
          <div class="input-card">
            <div id="emberInput" class="chat-input" contenteditable="true" placeholder="Message..."></div>

            <div class="input-actions">
              <input type="file" id="emberFileInput" class="hidden" multiple
                onchange="EmberCore.handleFileUpload(this)">

              <!-- Paperclip -->
              <button class="action-btn" title="Attach File"
                onclick="document.getElementById('emberFileInput').click()">
                <i class='bx bx-paperclip'></i>
              </button>

              <!-- Emojis -->
              <button class="action-btn" id="emoji-trigger" title="Emojis">
                <i class='bx bx-smile'></i>
              </button>

              <!-- Send -->
              <button id="emberSendBtn" class="action-btn" style="transform: rotate(
315deg);">
                <i class='bx bx-send' style="position: relative;top: -1px;right: -2px;"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- VIEW: NOTIFICATIONS -->
      <div id="view_notifications" class="view-container">
        <div class="list-view-content">
          <h3 class="list-header">Notifications</h3>
          <div class="list-item">
            <span style="font-weight:600; font-size:14px;">System Update</span>
            <span style="font-size:12px; color:var(--text-sub);">We have updated our privacy policy.</span>
          </div>
          <div class="list-item">
            <span style="font-weight:600; font-size:14px;">New Feature</span>
            <span style="font-size:12px; color:var(--text-sub);">Drag and drop file upload is now available!</span>
          </div>
          <button class="menu-item" onclick="EmberCore.switchView('chat')">
            <i class='bx bx-arrow-back'></i> Back
          </button>
        </div>
      </div>

      <!-- VIEW: SETTINGS -->
      <div id="view_settings" class="view-container">
        <div class="list-view-content">
          <h3 class="list-header">Settings</h3>
          <div
            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; color:var(--text-main);">
            <span>Dark Mode</span>
            <input type="checkbox" id="darkModeToggle" onchange="EmberCore.toggleDarkMode(this.checked)">
          </div>
          <button class="menu-item" style="color:red" onclick="localStorage.clear(); location.reload();">
            <i class='bx bx-trash'></i> Clear Data
          </button>
          <button class="menu-item" onclick="EmberCore.switchView('chat')">
            <i class='bx bx-arrow-back'></i> Back
          </button>
        </div>
      </div>

      <!-- VIEW: RECENT CHATS -->
      <div id="view_recent" class="view-container">
        <div class="list-view-content">
          <h3 class="list-header">Recent Chats</h3>
          <div id="emberHistoryList" style="display:flex; flex-direction:column;"></div>
          <button class="menu-item" onclick="EmberCore.switchView('chat')">
            <i class='bx bx-arrow-back'></i> Back
          </button>
        </div>
      </div>

    </div>

    <!-- Floating Draggable Emoji Window -->
    <div id="emoji-window-2B" class="Emoji-container emoji-floating-window">
      <div class="emoji-window-header">
        <span class="emoji-window-title">Emojis</span>
        <div class="emoji-drag-handle" title="Drag to move">
          <i class='bx bx-apps'></i>
        </div>
        <button class="emoji-close-btn" title="Close">
          <i class='bx bx-x'></i>
        </button>
      </div>
      <div class="emoji-window-body">
        <!-- Populated by JavaScript for extreme content & performance -->
      </div>
    </div>

    <!-- Lightbox Modal for Image Gallery -->
    <div id="lightbox-modal" class="lightbox-modal">
      <span class="lightbox-close" onclick="event.stopPropagation(); EmberCore.closeLightbox()">
        <i class='bx bx-x'></i>
      </span>
      <img id="lightbox-img" class="lightbox-content" src="" alt="">
      <p id="lightbox-caption" class="lightbox-caption"></p>
    </div>

    <!-- Report Modal -->
    <div id="report-modal" class="report-modal">
      <div class="report-modal-content" onclick="event.stopPropagation()">
        <div class="report-modal-header">
          <h3>Report</h3>
          <button class="report-close-btn" onclick="event.stopPropagation(); EmberCore.closeReportModal()">
            <i class='bx bx-x'></i>
          </button>
        </div>
        <div class="report-modal-body">
          <div class="report-options">
            <div class="report-column">
              <label class="report-option">
                <input type="radio" name="report-reason" value="threats">
                <span>Threats & Harassment</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="false">
                <span>False Statements</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="nsfw">
                <span>NSFW</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="exploitation">
                <span>Child Exploitation</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="terrorism">
                <span>Terrorism & Extremism</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="drugs">
                <span>Drug Transactions</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="impersonation">
                <span>Impersonation</span>
              </label>
            </div>
            <div class="report-column">
              <label class="report-option">
                <input type="radio" name="report-reason" value="violence">
                <span>Excessive Violence</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="hate">
                <span>Hate Speech</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="harassment">
                <span>Sexual Harassment</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="self-harm">
                <span>Self Harm</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="illegal">
                <span>Illegal Activities</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="privacy">
                <span>Invading Privacy</span>
              </label>
              <label class="report-option">
                <input type="radio" name="report-reason" value="spam">
                <span>Commercial Spam</span>
              </label>
            </div>
          </div>
          <div class="report-details">
            <label>Additional details</label>
            <textarea id="report-details-input" placeholder="Describe the issue in further detail"></textarea>
          </div>
        </div>
        <div class="report-modal-footer">
          <button class="report-cancel-btn"
            onclick="event.stopPropagation(); EmberCore.closeReportModal()">Cancel</button>
          <button class="report-submit-btn" onclick="event.stopPropagation(); EmberCore.submitReport()">Submit</button>
        </div>
      </div>
    </div>

    <script>
      /*
       * Enhanced Accordion System for Mobile Sidebar
       * Version: 2.0.0
       * Author: Blue Ember Development Team
       * Description: Isolated accordion functionality with auto-recovery and performance monitoring
       */

      (function () {
        'use strict';

        // Configuration
        const CONFIG = {
          version: '2.0.0',
          maxRetries: 5,
          retryDelay: 100,
          performanceThreshold: 16, // 60fps threshold
          clickThrottle: 50, // Minimum time between clicks
          lastClickTime: 0,
          recoveryCheckInterval: 1000,
          eventNamespace: 'blueEmberAccordion'
        };

        // State Management
        let state = {
          initialized: false,
          activeAccordions: new Set(),
          performanceMetrics: {
            totalClicks: 0,
            failedClicks: 0,
            avgResponseTime: 0
          },
          version: CONFIG.version,
          backupData: null
        };

        // Auto-Recovery System
        class AccordionRecovery {
          static checkFunctionality() {
            const triggers = document.querySelectorAll('[data-accordion-id]');
            let failedCount = 0;

            triggers.forEach(trigger => {
              const content = document.querySelector(`[data-accordion-content="${trigger.dataset.accordionId}"]`);
              if (!content || !trigger.addEventListener) {
                failedCount++;
              }
            });

            return failedCount === 0;
          }

          static restoreFunctionality() {
            if (!this.checkFunctionality()) {
              console.log('[Accordion Recovery] Restoring functionality...');
              initializeAccordionSystem();
              return true;
            }
            return false;
          }

          static startMonitoring() {
            setInterval(() => {
              if (!this.checkFunctionality()) {
                console.warn('[Accordion Recovery] Functionality degraded, attempting recovery...');
                this.restoreFunctionality();
              }
            }, CONFIG.recoveryCheckInterval);
          }
        }

        // Performance Monitor
        class PerformanceMonitor {
          static recordClick(startTime) {
            const responseTime = performance.now() - startTime;
            state.performanceMetrics.totalClicks++;

            if (responseTime > CONFIG.performanceThreshold) {
              console.warn(`[Performance] Slow accordion response: ${responseTime.toFixed(2)}ms`);
            }

            // Calculate rolling average
            const total = state.performanceMetrics.avgResponseTime * (state.performanceMetrics.totalClicks - 1) + responseTime;
            state.performanceMetrics.avgResponseTime = total / state.performanceMetrics.totalClicks;
          }

          static recordFailure() {
            state.performanceMetrics.failedClicks++;
          }

          static getMetrics() {
            return { ...state.performanceMetrics };
          }
        }

        // Event Delegation System
        class EventDelegator {
          static attach() {
            // Use event delegation for maximum efficiency and scalability
            document.addEventListener('click', this.handleClick.bind(this), { passive: false });

            // Keyboard support
            document.addEventListener('keydown', this.handleKeydown.bind(this), { passive: false });
          }

          static handleClick(event) {
            // Throttle rapid clicks
            const now = Date.now();
            if (now - CONFIG.lastClickTime < CONFIG.clickThrottle) {
              return;
            }
            CONFIG.lastClickTime = now;

            const startTime = performance.now();

            try {
              const trigger = event.target.closest('[data-accordion-id]');
              if (!trigger || !trigger.dataset.accordionId) {
                return;
              }

              event.preventDefault();
              event.stopPropagation();

              const accordionId = trigger.dataset.accordionId;
              this.toggleAccordion(accordionId, trigger);

              PerformanceMonitor.recordClick(startTime);
            } catch (error) {
              console.error('[Accordion] Click handling failed:', error);
              PerformanceMonitor.recordFailure();
              AccordionRecovery.restoreFunctionality();
            }
          }

          static handleKeydown(event) {
            if (event.key !== 'Enter' && event.key !== ' ') {
              return;
            }

            const trigger = event.target.closest('[data-accordion-id]');
            if (trigger) {
              event.preventDefault();
              trigger.click();
            }
          }

          static toggleAccordion(accordionId, trigger) {
            const content = document.querySelector(`[data-accordion-content="${accordionId}"]`);
            if (!content) {
              console.error(`[Accordion] Content not found for ${accordionId}`);
              return;
            }

            const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
            const wasActive = state.activeAccordions.has(accordionId);

            // Close all other accordions
            if (!isExpanded) {
              this.closeAllAccordions();
            }

            // Toggle current accordion
            if (isExpanded) {
              this.closeAccordion(accordionId, trigger, content);
            } else {
              this.openAccordion(accordionId, trigger, content);
            }
          }

          static openAccordion(accordionId, trigger, content) {
            content.style.display = 'block';
            content.offsetHeight; // Force reflow
            trigger.setAttribute('aria-expanded', 'true');
            content.style.maxHeight = content.scrollHeight + 'px';
            state.activeAccordions.add(accordionId);

            // Animate chevron
            const chevron = trigger.querySelector('.chevron');
            if (chevron) {
              chevron.style.transform = 'rotate(0deg)';
            }

            // Dispatch custom event
            trigger.dispatchEvent(new CustomEvent(`${CONFIG.eventNamespace}:opened`, {
              detail: { accordionId, trigger, content }
            }));
          }

          static closeAccordion(accordionId, trigger, content) {
            trigger.setAttribute('aria-expanded', 'false');
            content.style.maxHeight = '100%';
            state.activeAccordions.delete(accordionId);

            // Animate chevron
            const chevron = trigger.querySelector('.chevron');
            if (chevron) {
              chevron.style.transform = 'rotate(180deg)';
            }

            // Set display: none after transition
            const handleTransitionEnd = () => {
              if (trigger.getAttribute('aria-expanded') === 'false') {
                content.style.display = 'none';
              }
              content.removeEventListener('transitionend', handleTransitionEnd);
            };
            content.addEventListener('transitionend', handleTransitionEnd);

            // Dispatch custom event
            trigger.dispatchEvent(new CustomEvent(`${CONFIG.eventNamespace}:closed`, {
              detail: { accordionId, trigger, content }
            }));
          }

          static closeAllAccordions() {
            state.activeAccordions.forEach(accordionId => {
              const trigger = document.querySelector(`[data-accordion-id="${accordionId}"]`);
              const content = document.querySelector(`[data-accordion-content="${accordionId}"]`);

              if (trigger && content) {
                this.closeAccordion(accordionId, trigger, content);
              }
            });
          }
        }

        // Backup System
        class BackupSystem {
          static createBackup() {
            state.backupData = {
              version: CONFIG.version,
              timestamp: Date.now(),
              activeAccordions: Array.from(state.activeAccordions),
              triggers: Array.from(document.querySelectorAll('[data-accordion-id]')).map(trigger => ({
                id: trigger.dataset.accordionId,
                expanded: trigger.getAttribute('aria-expanded') === 'true'
              }))
            };

            // Store in multiple locations for redundancy
            try {
              localStorage.setItem(`${CONFIG.eventNamespace}_backup`, JSON.stringify(state.backupData));
              sessionStorage.setItem(`${CONFIG.eventNamespace}_backup`, JSON.stringify(state.backupData));
            } catch (error) {
              console.warn('[Backup] Failed to store backup:', error);
            }
          }

          static restoreBackup() {
            if (!state.backupData) {
              try {
                const stored = localStorage.getItem(`${CONFIG.eventNamespace}_backup`) ||
                  sessionStorage.getItem(`${CONFIG.eventNamespace}_backup`);
                if (stored) {
                  state.backupData = JSON.parse(stored);
                }
              } catch (error) {
                console.warn('[Backup] Failed to restore backup:', error);
              }
            }

            if (state.backupData && state.backupData.triggers) {
              state.backupData.triggers.forEach(triggerData => {
                const trigger = document.querySelector(`[data-accordion-id="${triggerData.id}"]`);
                const content = document.querySelector(`[data-accordion-content="${triggerData.id}"]`);

                if (trigger && content) {
                  if (triggerData.expanded) {
                    EventDelegator.openAccordion(triggerData.id, trigger, content);
                  } else {
                    EventDelegator.closeAccordion(triggerData.id, trigger, content);
                  }
                }
              });
            }
          }
        }

        // Main Initialization
        function initializeAccordionSystem() {
          try {
            console.log(`[Accordion] Initializing system version ${CONFIG.version}`);

            // Validate required elements
            const triggers = document.querySelectorAll('[data-accordion-id]');
            if (triggers.length === 0) {
              console.warn('[Accordion] No accordion triggers found');
              return false;
            }

            // Initialize state
            state.initialized = true;
            state.activeAccordions.clear();

            // Set initial state: Hidden
            document.querySelectorAll('[data-accordion-content]').forEach(content => {
              content.style.maxHeight = '0';
              content.style.overflow = 'hidden';
              content.style.display = 'none';
            });

            // Set up event delegation
            EventDelegator.attach();

            // Start monitoring
            AccordionRecovery.startMonitoring();

            // Create backup
            BackupSystem.createBackup();

            // Restore previous state if available
            BackupSystem.restoreBackup();

            // Set up resize handler for dynamic content
            let resizeTimeout;
            window.addEventListener('resize', () => {
              clearTimeout(resizeTimeout);
              resizeTimeout = setTimeout(() => {
                // Update heights for open accordions
                state.activeAccordions.forEach(accordionId => {
                  const content = document.querySelector(`[data-accordion-content="${accordionId}"]`);
                  if (content && content.style.maxHeight !== '100%') {
                    content.style.maxHeight = content.scrollHeight + 'px';
                  }
                });
              }, 250);
            });

            console.log(`[Accordion] System initialized successfully with ${triggers.length} triggers`);
            return true;

          } catch (error) {
            console.error('[Accordion] Initialization failed:', error);
            state.initialized = false;
            return false;
          }
        }

        // Public API
        window.BlueEmberAccordion = {
          version: CONFIG.version,
          initialize: initializeAccordionSystem,
          getMetrics: () => PerformanceMonitor.getMetrics(),
          getState: () => ({ ...state }),
          closeAll: () => EventDelegator.closeAllAccordions(),
          restore: () => AccordionRecovery.restoreFunctionality()
        };

        // Auto-initialize when DOM is ready
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initializeAccordionSystem);
        } else {
          // DOM is already ready
          setTimeout(initializeAccordionSystem, 0);
        }

      })();
    </script>
    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal logout-modal" style="display: none;" aria-hidden="true" role="dialog"
      aria-labelledby="logoutModalTitle">
      <div class="modal-overlay logout-modal-overlay"></div>
      <div class="modal-content logout-modal-content">
        <div class="logout-modal-header">
          <div class="logout-icon">
            <i class="fas fa-sign-out-alt"></i>
          </div>
          <h3 id="logoutModalTitle">Confirm Logout</h3>
        </div>
        <div class="logout-modal-body">
          <p>Are you sure you want to log out of your Blue Ember account? You will need to sign in again to access your
            profile.</p>
        </div>
        <div class="logout-modal-actions">
          <button id="logoutCancelBtn" class="logout-cancel-btn" type="button">Stay Logged In</button>
          <button id="logoutConfirmBtn" class="logout-confirm-btn" type="button">
            <span class="btn-text"><i class="fas fa-sign-out-alt"></i> Logout</span>
            <div class="custom-spinner">
              <div class="spinner">
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
              </div>
            </div>
          </button>
        </div>
      </div>
    </div>
</body>
 <!-- Lenis Smooth Scroll -->
  <script src="https://unpkg.com/lenis@1.1.20/dist/lenis.min.js"></script>
  <!-- Scroll Reveal & Lenis Init -->
  <script src="js/scroll-reveal.js"></script>
</html>