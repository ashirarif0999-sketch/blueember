<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout | Blue Ember Store</title>
    <!-- Font Imports -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">


    <script src="js/cart.js" defer></script>
    <script src="js/navigation.js" defer></script>
    <script src="js/app.js" defer></script>
    <script src="js/cart-manager.js" defer></script>
    <script src="js/cookie-manager.js" defer></script>
    <link rel="stylesheet" href="css/cookie-consent.css">

    <!-- Premium Checkout Styles -->
    <link href="premium-checkout.css" rel="stylesheet">
    <!-- Boxicons for consistent icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="footer.css">


    <!-- Auth UI Manager -->
    <script src="js/auth.js"></script>
</head>

<body>
    <!-- Premium Checkout Navbar -->
    <nav class="checkout-navbar">
        <a href="index.html" class="checkout-brand" aria-label="Return to home">
            <img src="assets/BlueEmber-ezgif.com-gif-maker.gif" alt="Blue Ember Logo">
            <div class="checkout-brand-text">
                <h6 style="color: #0099ff;">BLUE</h6>
                <h6 style="color: var(--text-primary);">EMBER</h6>
            </div>
        </a>

        <div class="secure-badge">
            <i class='bx bxs-lock-alt'></i> Secure Checkout
        </div>
    </nav>

    <!-- Main Checkout Content -->
    <div class="checkout-container">

        <!-- Left Side: Forms -->
        <div class="checkout-main">
            <!-- Steps -->
            <div class="checkout-steps">
                <div class="step-item active" id="step1-indicator">
                    <div class="step-circle">1</div>
                    <span class="step-label">Shipping</span>
                </div>
                <div class="step-item" id="step2-indicator">
                    <div class="step-circle">2</div>
                    <span class="step-label">Payment</span>
                </div>
                <div class="step-item" id="step3-indicator">
                    <div class="step-circle">3</div>
                    <span class="step-label">Confirm</span>
                </div>
            </div>

            <!-- STEP 1: SHIPPING -->
            <div class="glass-card" id="shipping-form">
                <h2 class="card-title"><i class='bx bxs-truck'></i> Shipping Details</h2>

                <h4
                    style="margin-bottom: 15px; font-size: 1rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px;">
                    Contact Information</h4>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="email" class="form-label">Email Address</label>
                        <input type="email" class="form-input" id="email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="fullName" class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="fullName" placeholder="John Doe" required>
                    </div>
                    <div class="form-group">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="tel" class="form-input" id="phone" placeholder="(555) 123-4567" required>
                    </div>
                </div>

                <h4
                    style="margin: 25px 0 15px; font-size: 1rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px;">
                    Home Address</h4>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="address" class="form-label">Street Address</label>
                        <input type="text" class="form-input" id="address" placeholder="123 Main St, Apt 4B" required>
                    </div>
                    <div class="form-group">
                        <label for="city" class="form-label">City</label>
                        <input type="text" class="form-input" id="city" placeholder="New York" required>
                    </div>
                    <div class="form-group">
                        <label for="state" class="form-label">State / Province</label>
                        <input type="text" class="form-input" id="state" placeholder="NY" required>
                    </div>
                    <div class="form-group">
                        <label for="zip" class="form-label">ZIP / Postal Code</label>
                        <input type="text" class="form-input" id="zip" placeholder="10001" required>
                    </div>
                </div>

                <button class="btn-checkout" id="proceed-to-payment">
                    Continue to Payment <i class='bx bx-right-arrow-alt'></i>
                </button>
            </div>

            <!-- STEP 2: PAYMENT (Hidden initially) -->
            <div class="glass-card" id="payment-form" style="display: none;">
                <h2 class="card-title"><i class='bx bxs-credit-card'></i> Payment Method</h2>

                <div class="payment-options">
                    <div class="payment-card selected" data-method="credit-card">
                        <i class='bx bxs-credit-card'></i>
                        <span>Card</span>
                    </div>
                    <div class="payment-card" data-method="paypal">
                        <i class='bx bxl-paypal'></i>
                        <span>PayPal</span>
                    </div>
                    <div class="payment-card" data-method="apple-pay">
                        <i class='bx bxl-apple'></i>
                        <span>Apple Pay</span>
                    </div>
                </div>

                <!-- Credit Card Inputs -->
                <div id="credit-card-inputs">
                    <div class="form-group">
                        <label for="card-number" class="form-label">Card Number</label>
                        <div style="position: relative;">
                            <input type="text" class="form-input" id="card-number" placeholder="0000 0000 0000 0000"
                                maxlength="19">
                            <i class='bx bxs-lock-alt'
                                style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="expiry" class="form-label">Expiry Date</label>
                            <input type="text" class="form-input" id="expiry" placeholder="MM / YY" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="cvv" class="form-label">CVV / CVC</label>
                            <input type="text" class="form-input" id="cvv" placeholder="123" maxlength="4">
                        </div>
                    </div>
                </div>

                <!-- PayPal Inputs (Hidden by default) -->
                <div id="paypal-inputs" style="display: none; text-align: center;">
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">You will be redirected to PayPal to
                        complete your purchase securely.</p>
                    <button class="paypal-login-mock">
                        <i class='bx bxl-paypal'></i> Log in to PayPal
                    </button>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button class="btn-checkout back-to-shipping"
                        style="background: transparent; border: 2px solid var(--text-secondary); color: var(--text-secondary); width: auto;">
                        Back
                    </button>
                    <button class="btn-checkout" id="place-order">
                        Complete Order <i class='bx bxs-check-shield'></i>
                    </button>
                </div>
            </div>

            <!-- STEP 3: CONFIRMATION (Hidden initially) -->
            <div class="glass-card" id="confirmation-page" style="display: none; text-align: center; padding: 50px;">
                <div
                    style="width: 80px; height: 80px; background: var(--success-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 10px 30px rgba(0, 230, 118, 0.3);">
                    <i class='bx bx-check' style="font-size: 50px; color: white;"></i>
                </div>
                <h2 style="font-size: 2rem; color: var(--text-primary); margin-bottom: 10px;">Order Confirmed!</h2>
                <p style="color: var(--text-secondary); margin-bottom: 30px;">Thank you for your purchase. A
                    confirmation email has been sent to <span id="conf-email-display"
                        style="font-weight: bold; color: var(--accent-color);"></span>.</p>

                <div
                    style="background: rgba(0,0,0,0.05); border-radius: 12px; padding: 20px; display: inline-block; margin-bottom: 30px;">
                    <p style="margin: 0; font-size: 0.9rem; color: var(--text-secondary);">Order Number</p>
                    <h3 style="margin: 5px 0 0; color: var(--text-primary); letter-spacing: 2px;">#BE-<span
                            id="order-number">8392</span></h3>
                </div>

                <a href="product2.html" class="btn-checkout" style="width: auto; display: inline-flex; margin: 0 auto;">
                    Continue Shopping
                </a>
            </div>

        </div>

        <!-- Right Side: Order Summary -->
        <div class="checkout-sidebar">
            <div class="glass-card">
                <h3 class="card-title" style="font-size: 1.2rem; margin-bottom: 20px;">Order Summary</h3>

                <div class="summary-items" id="order-items-container">
                    <!-- Dynamic items will be injected here via JS -->
                    <!-- Placeholder for design -->
                    <div style="display: flex; gap: 15px; margin-bottom: 15px; align-items: center;">
                        <div
                            style="width: 60px; height: 60px; background: #fff; border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--glass-border);">
                            <i class='bx bx-loader-alt bx-spin' style="color: var(--accent-color);"></i>
                        </div>
                        <div>
                            <p style="margin: 0; font-weight: 600; color: var(--text-primary);">Loading cart...</p>
                        </div>
                    </div>
                </div>

                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="order-subtotal">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Shipping</span>
                    <span id="order-shipping">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Tax (Estimated)</span>
                    <span id="order-tax">$0.00</span>
                </div>

                <div class="summary-row total">
                    <span>Total</span>
                    <span class="total-price" id="order-total">$0.00</span>
                </div>

                <div
                    style="margin-top: 20px; font-size: 0.8rem; color: var(--text-secondary); text-align: center; display: flex; align-items: center; justify-content: center; gap: 5px;">
                    <i class='bx bxs-lock'></i> Encrypted & Secure Payment
                </div>
            </div>
        </div>

    </div>

    <!-- Order Manager - MUST LOAD FIRST -->
    <script src="js/db-client.js"></script>
    <script src="js/order-manager.js"></script>

    <!-- Checkout Logic -->
    <script src="js/checkout.js"></script>
</body>
 <!-- Lenis Smooth Scroll -->
  <script src="https://unpkg.com/lenis@1.1.20/dist/lenis.min.js"></script>
  <!-- Scroll Reveal & Lenis Init -->
  <script src="js/scroll-reveal.js"></script>
</html>